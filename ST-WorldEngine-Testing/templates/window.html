<div class="world-engine-container world-engine-window">
    <div class="world-engine-toolbar">
        <div>
            <h3 data-i18n="World Engine">World Engine</h3>
            <p class="world-engine-description" data-i18n="Open an interactive 3D view inside SillyTavern.">Open an interactive 3D view inside SillyTavern.</p>
        </div>
    </div>
    
    <div class="world-engine-iframe-wrapper">
        <iframe id="world_engine_iframe" class="world-engine-iframe" src="{{src}}" title="World Engine" allowfullscreen></iframe>
        <div class="world-engine-iframe-error is-hidden" role="alert">
            <p class="world-engine-error-text" data-i18n="We couldn't load the World Engine.">We couldn't load the World Engine.</p>
            <button type="button" class="world-engine-retry-button menu_button" data-i18n="Retry">Retry</button>
        </div>
    </div>

    <div class="world-engine-settings" id="world_engine_settings">
        
        <!-- Speed Slider -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Movement speed">Movement Speed</div>
                <div class="world-engine-setting-value world-engine-speed-value" id="world_engine_speed_value">1.0x</div>
            </div>
            <input type="range" id="world_engine_speed" class="world-engine-slider" min="0.5" max="3" step="0.1">
        </div>

        <!-- Time of Day Slider -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Time of day">Time of day</div>
                <div class="world-engine-setting-value" id="world_engine_time_value">12:00</div>
            </div>
            <input type="range" id="world_engine_time_of_day" class="world-engine-slider" min="0" max="24" step="0.5">
        </div>

        <!-- Weather Preset -->
        <div class="world-engine-setting-card">
            <label class="world-engine-setting-label" for="world_engine_weather" data-i18n="Weather preset">Weather preset</label>
            <select id="world_engine_weather" class="world-engine-select">
                <option value="clear" data-i18n="Clear">Clear</option>
                <option value="foggy" data-i18n="Foggy">Foggy</option>
                <option value="rainy" data-i18n="Rainy">Rainy</option>
            </select>
        </div>

        <!-- Camera FOV Slider -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Camera FOV">Camera FOV</div>
                <div class="world-engine-setting-value" id="world_engine_fov_value">60Â°</div>
            </div>
            <input type="range" id="world_engine_fov" class="world-engine-slider" min="40" max="100" step="1">
        </div>

        <!-- Mouse Sensitivity Slider -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Mouse sensitivity">Mouse sensitivity</div>
                <div class="world-engine-setting-value" id="world_engine_sensitivity_value">1.0x</div>
            </div>
            <input type="range" id="world_engine_sensitivity" class="world-engine-slider" min="0.2" max="3" step="0.05">
        </div>

        <!-- Render Scale Slider -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Render scale">Render scale</div>
                <div class="world-engine-setting-value" id="world_engine_render_scale_value">100%</div>
            </div>
            <input type="range" id="world_engine_render_scale" class="world-engine-slider" min="0.5" max="1.5" step="0.05">
        </div>

        <!-- Invert Look -->
        <div class="world-engine-setting-card">
            <label class="world-engine-toggle">
                <span class="world-engine-setting-label" data-i18n="Invert look (vertical)">Invert Look</span>
                <input type="checkbox" id="world_engine_invert_look">
                <span class="world-engine-toggle-track"></span>
            </label>
        </div>

        <!-- Shadows Toggle -->
        <div class="world-engine-setting-card">
            <label class="world-engine-toggle">
                <span class="world-engine-setting-label" data-i18n="Enable shadows">Enable shadows</span>
                <input type="checkbox" id="world_engine_shadows">
                <span class="world-engine-toggle-track"></span>
            </label>
        </div>

        <!-- Instructions -->
        <div class="world-engine-setting-card">
            <label class="world-engine-toggle">
                <span class="world-engine-setting-label" data-i18n="Show instructions overlay">Show Overlay</span>
                <input type="checkbox" id="world_engine_show_instructions">
                <span class="world-engine-toggle-track"></span>
            </label>
        </div>

        <!-- Chat Bubble Toggle -->
        <div class="world-engine-setting-card">
            <label class="world-engine-toggle">
                <span class="world-engine-setting-label" data-i18n="Show chat bubble">Show chat bubble</span>
                <input type="checkbox" id="world_engine_show_chat_bubble">
                <span class="world-engine-toggle-track"></span>
            </label>
        </div>

        <!-- Weather Extras -->
        <div class="world-engine-setting-card">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Rain intensity">Rain intensity</div>
                <div class="world-engine-setting-value" id="world_engine_rain_intensity_value">1.0x</div>
            </div>
            <input type="range" id="world_engine_rain_intensity" class="world-engine-slider" min="0" max="2" step="0.05">
            <div class="world-engine-setting-header">
                <div class="world-engine-setting-label" data-i18n="Fog density">Fog density</div>
                <div class="world-engine-setting-value" id="world_engine_fog_density_value">1.0x</div>
            </div>
            <input type="range" id="world_engine_fog_density" class="world-engine-slider" min="0.2" max="3" step="0.05">
        </div>

    </div>
</div>
